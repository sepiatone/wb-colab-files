<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-7.5 -8 716.3499755859375 1386.800048828125" style="max-width: 100%;" xmlns="http://www.w3.org/2000/svg" width="100%" id="graph-div" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink"><style>@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css");'</style><style>#graph-div{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#graph-div .error-icon{fill:#552222;}#graph-div .error-text{fill:#552222;stroke:#552222;}#graph-div .edge-thickness-normal{stroke-width:2px;}#graph-div .edge-thickness-thick{stroke-width:3.5px;}#graph-div .edge-pattern-solid{stroke-dasharray:0;}#graph-div .edge-pattern-dashed{stroke-dasharray:3;}#graph-div .edge-pattern-dotted{stroke-dasharray:2;}#graph-div .marker{fill:#333333;stroke:#333333;}#graph-div .marker.cross{stroke:#333333;}#graph-div svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#graph-div .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#graph-div .cluster-label text{fill:#333;}#graph-div .cluster-label span,#graph-div p{color:#333;}#graph-div .label text,#graph-div span,#graph-div p{fill:#333;color:#333;}#graph-div .node rect,#graph-div .node circle,#graph-div .node ellipse,#graph-div .node polygon,#graph-div .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#graph-div .flowchart-label text{text-anchor:middle;}#graph-div .node .label{text-align:center;}#graph-div .node.clickable{cursor:pointer;}#graph-div .arrowheadPath{fill:#333333;}#graph-div .edgePath .path{stroke:#333333;stroke-width:2.0px;}#graph-div .flowchart-link{stroke:#333333;fill:none;}#graph-div .edgeLabel{background-color:#e8e8e8;text-align:center;}#graph-div .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#graph-div .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#graph-div .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#graph-div .cluster text{fill:#333;}#graph-div .cluster span,#graph-div p{color:#333;}#graph-div div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#graph-div .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#graph-div :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#graph-div .empty&gt;*{width:0px!important;height:0px!important;}#graph-div .empty span{width:0px!important;height:0px!important;}#graph-div .code&gt;*{color:red!important;}#graph-div .code span{color:red!important;}#graph-div .code tspan{fill:red!important;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="10" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="0" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(-7.5, -8)" class="root"><g class="clusters"><g id="subGraph1" class="cluster default flowchart-label"><rect height="1370.7999877929688" width="700.3500213623047" y="8" x="8" ry="0" rx="0" style=""></rect><g transform="translate(203.79375457763672, 8)" class="cluster-label"><foreignObject height="36" width="308.76251220703125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><span style="font-size:24px">TransformerBlock (attn only)</span></span></div></foreignObject></g></g><g id="subGraph0" class="cluster default flowchart-label"><rect height="827.9999923706055" width="606.0062713623047" y="175.5999984741211" x="82.34375" ry="0" rx="0" style=""></rect><g transform="translate(86.81563568115234, 175.5999984741211)" class="cluster-label"><foreignObject height="36" width="597.0625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><span style="font-size:24px">attn                              </span></span></div></foreignObject></g></g></g><g class="edgePaths"><path style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-resid_pre LE-D" id="L-resid_pre-D-0" d="M200.77500534057617,87.22475204036594L177.70312945048013,95.78729311265847C154.63125356038412,104.349834184951,108.48750178019206,121.47491632953604,85.41562589009602,136.20412406849525C62.34375,150.93333180745444,62.34375,163.26666514078775,62.34375,179.3166650136312C62.34375,195.3666648864746,62.34375,215.13333129882812,62.34375,234.89999771118164C62.34375,254.66666412353516,62.34375,274.4333305358887,62.34375,290.4833304087321C62.34375,306.5333302815755,62.34375,318.8666636149089,62.34375,333.1999969482422C62.34375,347.5333302815755,62.34375,363.8666636149089,62.34375,383.91666348775226C62.34375,403.9666633605957,62.34375,427.7333297729492,62.34375,451.49999618530273C62.34375,475.26666259765625,62.34375,499.03332901000977,62.34375,522.7999954223633C62.34375,546.5666618347168,62.34375,570.3333282470703,62.34375,592.0999946594238C62.34375,613.8666610717773,62.34375,633.6333274841309,62.34375,648.9333273569742C62.34375,664.2333272298177,62.34375,675.066660563151,62.34375,687.8999938964844C62.34375,700.7333272298177,62.34375,715.566660563151,62.34375,734.8666604359945C62.34375,754.1666603088379,62.34375,777.9333267211914,62.34375,801.6999931335449C62.34375,825.4666595458984,62.34375,849.233325958252,62.34375,872.9999923706055C62.34375,896.766658782959,62.34375,920.5333251953125,62.34375,942.299991607666C62.34375,964.0666580200195,62.34375,983.833324432373,62.34375,999.8833243052164C62.34375,1015.9333241780599,62.34375,1028.2666575113933,62.34375,1046.3166573842366C62.34375,1064.36665725708,62.34375,1088.1333236694336,62.34375,1109.899990081787C62.34375,1131.6666564941406,62.34375,1151.4333229064941,97.25416819254558,1166.5460784477793C132.16458638509116,1181.6588339890643,201.98542277018228,1192.117678659281,236.89584096272787,1197.3471009943894L271.80625915527344,1202.5765233294976"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-D LE-resid_post" id="L-D-resid_post-0" d="M279.30625915527344,1211.1999893188477L279.30625915527344,1217.3666559855144C279.30625915527344,1223.533322652181,279.30625915527344,1235.8666559855144,279.30625915527344,1248.1999893188477C279.30625915527344,1260.533322652181,279.30625915527344,1272.8666559855144,279.30625915527344,1279.033322652181L279.30625915527344,1285.1999893188477"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-resid_pre LE-v" id="L-resid_pre-v-0" d="M228.36918844672238,101.5999984741211L223.67797004756162,107.76666514078777C218.98675164840085,113.93333180745442,209.6043148500793,126.26666514078777,204.91309645091857,138.5999984741211C200.2218780517578,150.93333180745444,200.2218780517578,163.26666514078775,200.2218780517578,179.3166650136312C200.2218780517578,195.3666648864746,200.2218780517578,215.13333129882812,200.2218780517578,234.89999771118164C200.2218780517578,254.66666412353516,200.2218780517578,274.4333305358887,200.2218780517578,290.4833304087321C200.2218780517578,306.5333302815755,200.2218780517578,318.8666636149089,200.2218780517578,333.1999969482422C200.2218780517578,347.5333302815755,200.2218780517578,363.8666636149089,200.2218780517578,383.91666348775226C200.2218780517578,403.9666633605957,200.2218780517578,427.7333297729492,200.2218780517578,451.49999618530273C200.2218780517578,475.26666259765625,200.2218780517578,499.03332901000977,200.2218780517578,517.0833288828532C200.2218780517578,535.1333287556967,200.2218780517578,547.4666620890299,200.2218780517578,553.6333287556967L200.2218780517578,559.7999954223633"></path><path style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-v LE-G" id="L-v-G-0" d="M200.2218780517578,628.3999938964844L200.2218780517578,632.566660563151C200.2218780517578,636.7333272298177,200.2218780517578,645.066660563151,224.42552502950033,654.3839874833659C248.62917200724283,663.7013144035808,297.03646596272785,674.0026349106771,321.2401129404704,679.1532951642254L345.4437599182129,684.3039554177735"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-G LE-z" id="L-G-z-0" d="M352.9437599182129,693.3999938964844L352.9437599182129,699.566660563151C352.9437599182129,705.7333272298177,352.9437599182129,718.066660563151,352.9437599182129,730.3999938964844C352.9437599182129,742.7333272298177,352.9437599182129,755.066660563151,352.9437599182129,761.2333272298177L352.9437599182129,767.3999938964844"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-z LE-result" id="L-z-result-0" d="M352.9437599182129,835.9999923706055L352.9437599182129,842.1666590372721C352.9437599182129,848.3333257039388,352.9437599182129,860.6666590372721,352.9437599182129,872.9999923706055C352.9437599182129,885.3333257039388,352.9437599182129,897.6666590372721,352.9437599182129,903.8333257039388L352.9437599182129,909.9999923706055"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-result LE-attn_out" id="L-result-attn_out-0" d="M352.9437599182129,978.5999908447266L352.9437599182129,982.7666575113932C352.9437599182129,986.9333241780599,352.9437599182129,995.2666575113932,352.9437599182129,1005.5999908447266C352.9437599182129,1015.9333241780599,352.9437599182129,1028.2666575113933,352.9437599182129,1040.5999908447266C352.9437599182129,1052.9333241780598,352.9437599182129,1065.2666575113933,352.9437599182129,1071.4333241780598L352.9437599182129,1077.5999908447266"></path><path style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-attn_out LE-D" id="L-attn_out-D-0" d="M352.9437599182129,1146.1999893188477L352.9437599182129,1150.3666559855144C352.9437599182129,1154.533322652181,352.9437599182129,1162.8666559855144,341.92084312438965,1171.8983003074188C330.8979263305664,1180.9299446293232,308.8520927429199,1190.6598999397988,297.8291759490967,1195.5248775950365L286.80625915527344,1200.3898552502744"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-resid_pre LE-q" id="L-resid_pre-q-0" d="M301.0447205066115,101.5999984741211L309.41956015423193,107.76666514078777C317.7943998018523,113.93333180745442,334.5440790970932,126.26666514078777,342.9189187447136,138.5999984741211C351.293758392334,150.93333180745444,351.293758392334,163.26666514078775,351.293758392334,173.5999984741211C351.293758392334,183.93333180745444,351.293758392334,192.26666514078775,351.293758392334,196.43333180745444L351.293758392334,200.5999984741211"></path><path style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-q LE-F" id="L-q-F-0" d="M351.293758392334,269.1999969482422L351.293758392334,273.3666636149089C351.293758392334,277.5333302815755,351.293758392334,285.8666636149089,366.4573008219401,295.73036442580576C381.6208432515462,305.59406523670265,411.9479281107585,316.9881335251631,427.11147054036456,322.68516766939337L442.2750129699707,328.38220181362357"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-F LE-attn_scores" id="L-F-attn_scores-0" d="M449.7750129699707,338.6999969482422L449.7750129699707,345.6166636149089C449.7750129699707,352.5333302815755,449.7750129699707,366.3666636149089,449.7750129699707,379.4499969482422C449.7750129699707,392.5333302815755,449.7750129699707,404.8666636149089,449.7750129699707,411.0333302815755L449.7750129699707,417.1999969482422"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-attn_scores LE-pattern" id="L-attn_scores-pattern-0" d="M449.7750129699707,485.7999954223633L449.7750129699707,491.96666208902997C449.7750129699707,498.1333287556966,449.7750129699707,510.46666208902997,449.7750129699707,522.7999954223633C449.7750129699707,535.1333287556967,449.7750129699707,547.4666620890299,449.7750129699707,553.6333287556967L449.7750129699707,559.7999954223633"></path><path style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-pattern LE-G" id="L-pattern-G-0" d="M449.7750129699707,628.3999938964844L449.7750129699707,632.566660563151C449.7750129699707,636.7333272298177,449.7750129699707,645.066660563151,434.88647079467773,654.2304495993732C419.99792861938477,663.3942386355952,390.2208442687988,673.3884833747061,375.33230209350586,678.3856057442615L360.4437599182129,683.3827281138169"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-resid_pre LE-k" id="L-resid_pre-k-0" d="M308.1500053405762,80.32927079233006L348.16771570841473,90.04105873929524C388.18542607625324,99.75284668626041,468.22084681193036,119.17642258019076,508.23855717976886,135.0548771938226C548.2562675476074,150.93333180745444,548.2562675476074,163.26666514078775,548.2562675476074,173.5999984741211C548.2562675476074,183.93333180745444,548.2562675476074,192.26666514078775,548.2562675476074,196.43333180745444L548.2562675476074,200.5999984741211"></path><path style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-k LE-F" id="L-k-F-0" d="M548.2562675476074,269.1999969482422L548.2562675476074,273.3666636149089C548.2562675476074,277.5333302815755,548.2562675476074,285.8666636149089,533.0927251180013,295.73036442580576C517.9291826883951,305.59406523670265,487.6020978291829,316.9881335251631,472.43855539957684,322.68516766939337L457.2750129699707,328.38220181362357"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(279.30625915527344, 1248.1999893188477)" class="edgeLabel"><g transform="translate(-13.11875057220459, -12)" class="label"><foreignObject height="24" width="26.23750114440918"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">add</span></div></foreignObject></g></g><g transform="translate(200.2218780517578, 331.1999969482422)" class="edgeLabel"><g transform="translate(-15.71250057220459, -12)" class="label"><foreignObject height="24" width="31.42500114440918"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">W_V</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(352.9437599182129, 730.3999938964844)" class="edgeLabel"><g transform="translate(-107.2750015258789, -12)" class="label"><foreignObject height="24" width="214.5500030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">weighted avg of value vectors</span></div></foreignObject></g></g><g transform="translate(352.9437599182129, 872.9999923706055)" class="edgeLabel"><g transform="translate(-16.40625, -12)" class="label"><foreignObject height="24" width="32.8125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">W_O</span></div></foreignObject></g></g><g transform="translate(352.9437599182129, 1040.5999908447266)" class="edgeLabel"><g transform="translate(-55.38750076293945, -12)" class="label"><foreignObject height="24" width="110.7750015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">sum over heads</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(351.293758392334, 138.5999984741211)" class="edgeLabel"><g transform="translate(-16.418750762939453, -12)" class="label"><foreignObject height="24" width="32.837501525878906"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">W_Q</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(449.7750129699707, 380.1999969482422)" class="edgeLabel"><g transform="translate(-151.7062530517578, -12)" class="label"><foreignObject height="24" width="303.4125061035156"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">dot product along d_head, scale and mask</span></div></foreignObject></g></g><g transform="translate(449.7750129699707, 522.7999954223633)" class="edgeLabel"><g transform="translate(-28.512500762939453, -12)" class="label"><foreignObject height="24" width="57.025001525878906"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">softmax</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(548.2562675476074, 138.5999984741211)" class="edgeLabel"><g transform="translate(-15.61875057220459, -12)" class="label"><foreignObject height="24" width="31.23750114440918"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">W_K</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(279.30625915527344, 1319.4999885559082)" id="flowchart-resid_post-817" class="node default default flowchart-label"><rect height="68.60000228881836" width="107.375" y="-34.30000114440918" x="-53.6875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-46.1875, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="92.375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">resid_post<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(seq, d_model)</code></span></div></foreignObject></g></g><g transform="translate(254.46250534057617, 67.29999923706055)" id="flowchart-resid_pre-815" class="node default default flowchart-label"><rect height="68.60000228881836" width="107.375" y="-34.30000114440918" x="-53.6875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-46.1875, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="92.375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">resid_pre<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(seq, d_model)</code></span></div></foreignObject></g></g><g transform="translate(279.30625915527344, 1203.6999893188477)" id="flowchart-D-816" class="node default empty flowchart-label"><rect height="15" width="15" y="-7.5" x="-7.5" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(0, 0)" style="" class="label"><rect></rect><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g><g transform="translate(200.2218780517578, 594.0999946594238)" id="flowchart-v-818" class="node default default flowchart-label"><rect height="68.60000228881836" width="146.96250915527344" y="-34.30000114440918" x="-73.48125457763672" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-65.98125457763672, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="131.96250915527344"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">v<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(seq, nhead, d_head)</code></span></div></foreignObject></g></g><g transform="translate(352.9437599182129, 685.8999938964844)" id="flowchart-G-824" class="node default empty flowchart-label"><rect height="15" width="15" y="-7.5" x="-7.5" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(0, 0)" style="" class="label"><rect></rect><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g><g transform="translate(352.9437599182129, 801.6999931335449)" id="flowchart-z-825" class="node default default flowchart-label"><rect height="68.60000228881836" width="146.96250915527344" y="-34.30000114440918" x="-73.48125457763672" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-65.98125457763672, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="131.96250915527344"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">z<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(seq, nhead, d_head)</code></span></div></foreignObject></g></g><g transform="translate(352.9437599182129, 944.299991607666)" id="flowchart-result-826" class="node default default flowchart-label"><rect height="68.60000228881836" width="153.5625" y="-34.30000114440918" x="-76.78125" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-69.28125, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="138.5625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">result<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(seq, nhead, d_model)</code></span></div></foreignObject></g></g><g transform="translate(352.9437599182129, 1111.899990081787)" id="flowchart-attn_out-832" class="node default default flowchart-label"><rect height="68.60000228881836" width="107.375" y="-34.30000114440918" x="-53.6875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-46.1875, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="92.375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">attn_out<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(seq, d_model)</code></span></div></foreignObject></g></g><g transform="translate(351.293758392334, 234.89999771118164)" id="flowchart-q-819" class="node default default flowchart-label"><rect height="68.60000228881836" width="146.96250915527344" y="-34.30000114440918" x="-73.48125457763672" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-65.98125457763672, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="131.96250915527344"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">q<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(seq, nhead, d_head)</code></span></div></foreignObject></g></g><g transform="translate(449.7750129699707, 331.1999969482422)" id="flowchart-F-822" class="node default empty flowchart-label"><rect height="15" width="15" y="-7.5" x="-7.5" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(0, 0)" style="" class="label"><rect></rect><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g><g transform="translate(449.7750129699707, 451.49999618530273)" id="flowchart-attn_scores-821" class="node default default flowchart-label"><rect height="68.60000228881836" width="140.3625030517578" y="-34.30000114440918" x="-70.1812515258789" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-62.681251525878906, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="125.36250305175781"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">attn_scores<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(nhead, seqQ, seqK)</code></span></div></foreignObject></g></g><g transform="translate(449.7750129699707, 594.0999946594238)" id="flowchart-pattern-823" class="node default default flowchart-label"><rect height="68.60000228881836" width="140.3625030517578" y="-34.30000114440918" x="-70.1812515258789" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-62.681251525878906, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="125.36250305175781"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">pattern<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(nhead, seqQ, seqK)</code></span></div></foreignObject></g></g><g transform="translate(548.2562675476074, 234.89999771118164)" id="flowchart-k-820" class="node default default flowchart-label"><rect height="68.60000228881836" width="146.96250915527344" y="-34.30000114440918" x="-73.48125457763672" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-65.98125457763672, -26.80000114440918)" style="" class="label"><rect></rect><foreignObject height="53.60000228881836" width="131.96250915527344"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">k<div style="border-top:2px solid black;margin-top:4px"></div><code style="color:red;font-size:12px">(seq, nhead, d_head)</code></span></div></foreignObject></g></g></g></g></g></g></g></svg>